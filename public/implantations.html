<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Implantations CHRISCO</title>

<link rel="stylesheet" href="styles.css">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="firebase-config.js"></script>

<style>
:root{
  --blue:#0b2e59; --red:#c50000; --white:#fff; --bg:#f5f6fa;
}

.page { 
  max-width: 1050px; 
  margin: 25px auto; 
  background: var(--white); 
  padding: 20px; 
  border-radius: 12px; 
  box-shadow: 0 4px 12px rgba(0,0,0,.08);
}

.title { 
  color: var(--blue); 
  border-left: 6px solid var(--red); 
  padding-left: 10px;
}

#map {
  width: 100%;
  height: 420px;
  border-radius: 12px;
  margin-top: 20px;
  box-shadow: 0 4px 12px rgba(0,0,0,.12);
}

.card-loc {
  margin: 15px 0;
  padding: 10px;
  border-left: 4px solid var(--blue);
  background: #f3f6ff;
  border-radius: 8px;
}
</style>

</head>
<body>

<header class="header">
  <div style="display:flex;align-items:center;gap:10px;">
    <img src="images/LOGO CHRISCO dac.png" style="height:55px">
    <strong>CHRISCO</strong>
  </div>

  <nav class="nav">
    <a href="index.html">Accueil</a>
    <a href="ministeres.html">Ministères</a>
    <a href="organigramme.html">Organigramme</a>
    <a href="programme.html">Programme</a>
    <a href="vision.html">Vision</a>
    <a href="implantations.html" class="active">Implantations</a>
    <a href="contact.html">Contact</a>
  </nav>
</header>

<div class="page">
  <h2 class="title">Implantations CHRISCO</h2>

  <p>Découvrez les différentes implantations de notre église dans la ville.</p>

  <div id="map"></div>

  <h3 style="margin-top:25px;color:var(--blue)">Liste des Implantations</h3>
  <div id="locList"></div>
</div>

<footer class="footer">
  © 2025 CHRISCO — Christ et Compagnons. <br>
  <a href="admin.html">Administration</a>
</footer>

<!-- ===== GOOGLE MAPS ===== -->
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY"></script>

<script>
// Firebase
firebase.initializeApp(window.firebaseConfig);
const db = firebase.firestore();

let map;
let bounds;

// Initialisation carte
function initMap() {
  map = new google.maps.Map(document.getElementById("map"), {
    center: { lat: -4.35, lng: 15.30 },
    zoom: 12,
  });
  bounds = new google.maps.LatLngBounds();
}

// Charger les implantations depuis Firestore
db.collection("implantations").orderBy("nom").onSnapshot(snap=>{
  if(!map) initMap();

  locList.innerHTML = "";

  snap.docs.forEach(doc=>{
    const d = doc.data();

    // Affichage liste
    locList.innerHTML += `
      <div class="card-loc">
        <strong>${d.nom}</strong><br>
        ${d.adresse}<br>
        <small>${d.description || ''}</small>
      </div>
    `;

    // Ajout marker
    if(d.lat && d.lng){
      const pos={lat:d.lat, lng:d.lng};
      const marker = new google.maps.Marker({
        position: pos,
        map: map,
        title: d.nom
      });

      bounds.extend(pos);
      map.fitBounds(bounds);
    }
  });
});
</script>

</body>
</html>
